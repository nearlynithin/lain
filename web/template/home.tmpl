{{template "layout.tmpl" .}}


{{define "content"}}
<main>
    {{if .Session.IsLoggedIn}}
<div class="create-post-container">
  <div>  <button id="createPostBtn">CREATE POST</button>
    <form action="/posts" method="POST" id="createPostForm" style="display: none;">
        <textarea id="textarea" name="content" aria-label="content" placeholder="SAY HI!!" rows="1" cols="150" required>
            {{- .CreatePostForm.Get "content" -}}
        </textarea>
        {{with .CreatePostErr}}
        <p>Could not create post: <code>{{.Error}}</code></p></div>
        {{end}}

      <div><button type="submit" id="postbtn">POST</button></div>
    </form>
</div>
    {{end}}

    {{range .Posts}}
    {{template "post-article.tmpl" .}}
    {{end}}
</main>

<script>
    document.getElementById('createPostBtn').addEventListener('click', function() {
        var btn = document.getElementById('createPostBtn');
        var form = document.getElementById('createPostForm');
        btn.style.display = 'none';
        form.style.display = 'block';
    });
</script>
{{end}}
